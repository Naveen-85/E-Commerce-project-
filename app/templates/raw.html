<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Product</title>
    <!-- Add Bootstrap CSS -->
    

    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
      .form-group {
        margin-bottom: 15px;
      }
      label {
        display: block;
        margin-bottom: 5px;
      }
      input[type="text"],
      input[type="number"],
      textarea,
      select,
      input[type="file"] {
        width: 100%;
        padding: 8px;
        box-sizing: border-box;
      }
    
      .button {
        padding: 10px 15px;
        color: white;
        cursor: pointer;
        margin-bottom: 15px;
      }

      .image-preview {
        display: flex;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .image-preview .image-container {
        position: relative;
        margin-right: 10px;
        margin-bottom: 10px;
      }
      .image-preview img {
        max-width: 100px;
        max-height: 100px;
      }
      .remove-image {
        position: absolute;
        top: 5px;
        right: 5px;
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        cursor: pointer;
        padding: 2px 5px;
      }
    </style>

    <!-- Add Bootstrap JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <div class="container shadow" style="margin-top: 50px;">
        <h1 style="padding: 5px;" >Add Product</h1>
        <form action="/submit-product" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label for="name">Product Name:</label>
                <input type="text" id="name" name="name" required />
            </div>

            <div class="form-group">
                <label for="images">Product Images:</label>
                <input
                    type="file"
                    id="images"
                    name="images"
                    multiple
                    required
                    onchange="previewImages()"
                />
                <button class="btn btn-secondary" onclick="removeAllImages()">Clear All Images</button>
                <div id="image-preview" class="image-preview"></div>
            </div>

            <div class="form-group">
                <label for="price">Price:</label>
                <input type="number" id="price" name="price" required />
            </div>

            <div class="form-group">
                <label for="base_feature">Base Feature:</label>
                <input type="text" id="base_feature" name="base_feature" required />
            </div>

            <div class="form-group">
                <label for="stock">Stock:</label>
                <input type="number" id="stock" name="stock" required />
            </div>

            <div class="form-group">
                <label for="description">Description:</label>
                <textarea
                    id="description"
                    name="description"
                    rows="5"
                    required
                ></textarea>
            </div>

            <div class="form-group">
                <label for="cat_id">Category:</label>
                <select id="cat_id" name="cat_id" required>
                    <option value="">Select Category</option>
                    <option value="electronics">Electronics</option>
                    <option value="fashion">Fashion</option>
                    <option value="home_appliances">Home Appliances</option>
                    <option value="books">Books</option>
                    <option value="sports">Sports</option>
                    <!-- Add more categories as needed -->
                </select>
            </div>

            <button class="btn btn-dark" type="submit">Add Product</button>
            <button class="btn btn-danger" onclick="removeAllImages()">Cancel</button>
        </form>
    </div>

    <script>
        function previewImages() {
            var preview = document.getElementById("image-preview");
            preview.innerHTML = "";
            var files = document.getElementById("images").files;

            if (files) {
                Array.from(files).forEach((file, index) => {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var imageContainer = document.createElement("div");
                        imageContainer.classList.add("image-container");

                        var img = document.createElement("img");
                        img.src = e.target.result;

                        var removeButton = document.createElement("button");
                        removeButton.classList.add("remove-image");
                        removeButton.innerHTML = "Remove";
                        removeButton.onclick = function () {
                            removeImage(index);
                        };

                        imageContainer.appendChild(img);
                        imageContainer.appendChild(removeButton);
                        preview.appendChild(imageContainer);
                    };
                    reader.readAsDataURL(file);
                });
            }
        }

        function removeImage(index) {
            var files = document.getElementById("images").files;
            var dataTransfer = new DataTransfer();

            Array.from(files).forEach((file, i) => {
                if (i !== index) {
                    dataTransfer.items.add(file);
                }
            });

            document.getElementById("images").files = dataTransfer.files;
            previewImages();
        }
    </script>
</body>
  </html>
